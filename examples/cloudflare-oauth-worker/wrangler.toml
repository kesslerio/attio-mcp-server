# Cloudflare Worker configuration for Attio OAuth Broker
# See: https://developers.cloudflare.com/workers/configuration/

name = "attio-oauth-broker"
main = "worker.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Development settings
[dev]
port = 8787

# Environment variables (set via CLI or dashboard, NOT in this file)
# wrangler secret put ATTIO_CLIENT_ID
# wrangler secret put ATTIO_CLIENT_SECRET
# wrangler secret put WORKER_URL

# Vars that can be in config (non-sensitive)
[vars]
# WORKER_URL will be set as a secret for production

# Optional: KV namespace for session storage
# Uncomment and create namespace if you want to persist OAuth sessions
# [[kv_namespaces]]
# binding = "OAUTH_SESSIONS"
# id = "your-kv-namespace-id"

# Production environment
[env.production]
name = "attio-oauth-broker"

# Staging environment (optional)
[env.staging]
name = "attio-oauth-broker-staging"

# Custom domain (optional)
# [routes]
# pattern = "oauth.yourdomain.com/*"
# zone_name = "yourdomain.com"
