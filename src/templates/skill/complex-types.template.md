# Complex Type Structures

This document provides detailed structure requirements for complex Attio attribute types.

---

## Location

Attio requires **ALL 10 fields** to be present when writing location attributes. Use `null` for empty fields.

### Required Structure

```typescript
{
  line_1: string | null,        // Street address
  line_2: string | null,        // Apt/Suite
  line_3: string | null,        // Additional address line
  line_4: string | null,        // Additional address line
  locality: string | null,      // City
  region: string | null,        // State/Province
  postcode: string | null,      // ZIP/Postal code
  country_code: string | null,  // ISO country code (e.g., "US", "GB")
  latitude: number | null,      // Coordinates
  longitude: number | null      // Coordinates
}
```

### Common Mistakes

❌ **Wrong**: Missing fields

```json
{
  "line_1": "123 Main St",
  "locality": "New York"
}
```

✅ **Correct**: All fields present

```json
{
  "line_1": "123 Main St",
  "line_2": null,
  "line_3": null,
  "line_4": null,
  "locality": "New York",
  "region": "NY",
  "postcode": "10001",
  "country_code": "US",
  "latitude": null,
  "longitude": null
}
```

### Common Field Aliases

These are NOT valid - always use the exact field names above:

- `city` → Use `locality`
- `state` → Use `region`
- `zip` → Use `postcode`
- `country` → Use `country_code`

---

## Personal Name

### Required Structure

```typescript
{
  first_name: string,           // Required
  last_name: string | null,
  middle_name: string | null,
  title: string | null,         // e.g., "Dr.", "Prof.", "Mr."
  full_name: string             // Auto-generated by Attio
}
```

### String Parsing

When Attio receives a string instead of an object, it will parse it:

```json
Input: "John Doe"
Parsed to:
{
  "first_name": "John",
  "last_name": "Doe",
  "middle_name": null,
  "title": null,
  "full_name": "John Doe"
}
```

### Examples

✅ **Correct**: Object format

```json
{
  "first_name": "Jane",
  "last_name": "Smith",
  "middle_name": null,
  "title": "Dr.",
  "full_name": "Dr. Jane Smith"
}
```

✅ **Correct**: String format (auto-parsed)

```json
"Jane Smith"
```

---

## Phone Number

### Required Structure

```typescript
{
  country_code: string,         // e.g., "+1", "+44"
  number: string,               // Digits only (no formatting)
  original_number: string       // As provided by user
}
```

### Examples

✅ **Correct**:

```json
{
  "country_code": "+1",
  "number": "5551234567",
  "original_number": "(555) 123-4567"
}
```

### String Parsing

Attio will attempt to parse phone number strings:

```json
Input: "+1 (555) 123-4567"
Parsed to:
{
  "country_code": "+1",
  "number": "5551234567",
  "original_number": "+1 (555) 123-4567"
}
```

---

## Email Address

### Required Structure

```typescript
{
  email_address: string; // Must be valid email format
}
```

### Examples

✅ **Correct**: Object format

```json
{
  "email_address": "jane@example.com"
}
```

✅ **Correct**: String format (auto-converted)

```json
"jane@example.com"
```

---

## Usage in API Calls

### Creating Records with Complex Types

```typescript
// Example: Creating a company with location
{
  "name": "Acme Corp",
  "primary_location": {
    "line_1": "123 Main St",
    "line_2": null,
    "line_3": null,
    "line_4": null,
    "locality": "San Francisco",
    "region": "CA",
    "postcode": "94105",
    "country_code": "US",
    "latitude": null,
    "longitude": null
  }
}
```

### Updating Complex Type Fields

When updating, you must provide the **complete structure**, even if only changing one field:

❌ **Wrong**: Partial update

```json
{
  "primary_location": {
    "line_1": "456 New St"
  }
}
```

✅ **Correct**: Complete structure

```json
{
  "primary_location": {
    "line_1": "456 New St",
    "line_2": null,
    "line_3": null,
    "line_4": null,
    "locality": "San Francisco",
    "region": "CA",
    "postcode": "94105",
    "country_code": "US",
    "latitude": null,
    "longitude": null
  }
}
```

---

## Need Help?

If you encounter errors with complex types:

1. **Verify structure completeness**: All required fields present?
2. **Check field names**: Exact match (case-sensitive)?
3. **Use MCP discovery tools**:
   - `records_discover_attributes` - Get attribute metadata
   - Check the attribute's type to confirm it's a complex type

For the most up-to-date structures, always verify with the MCP discovery tools.
