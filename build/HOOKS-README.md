# Git Hooks for Attio MCP

This directory contains git hooks to enforce code quality standards and prevent unwanted AI attribution in the codebase.

## Available Hooks

- **pre-commit**: Scans commit messages for specific AI attribution phrases and removes them

## How the Attribution Handling Works

The system is designed to check **only commit messages** for specific AI attribution phrases and automatically remove them. The pre-commit hook does not scan file contents, only commit messages.

### Specific Phrases Detected

The pre-commit hook looks for exact matches of these specific phrases:

- " Generated with Claude Code"
- " Generated with [Claude Code](https://claude.ai/code)"
- "Co-Authored-By: Claude <noreply@anthropic.com>"
- "Generated by Claude"
- "Generated by AI"
- "Generated with Claude" 
- "Generated with AI"
- "Co-Authored-By: Assistant"
- "Created by AI"
- "Created with AI"

## Installation

The hooks are automatically installed via the `postinstall` script in package.json when you run `npm install`.

If you need to install them manually, run:

```bash
npm run setup-hooks
```

Or run the install script directly:

```bash
./build/install-hooks.sh
```

### Installation Options

The install script supports different installation methods:

```bash
# Install using symlinks (default) - keeps hooks in sync with repository changes
./build/install-hooks.sh --symlink

# Install by copying hooks directly to .git/hooks
./build/install-hooks.sh --copy
```

## Manual Testing

To manually test the hooks, use:

```bash
./build/test-hooks.sh
```

## Troubleshooting

If you encounter issues with the hooks:

1. Ensure the hook scripts are executable:
   ```bash
   chmod +x build/hooks/pre-commit
   ```

2. Verify the hook installation:
   ```bash
   ls -la .git/hooks/
   ```

3. Test the phrase detection using the exact phrase:
   ```bash
   echo " Generated with Claude Code" | grep -F " Generated with Claude Code" && echo "Phrase detected"
   ```

4. If you're getting false positives, make sure the file isn't listed in the exemptions file:
   ```bash
   cat build/hooks/config/exempted_files.conf
   ```